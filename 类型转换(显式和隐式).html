<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>javascript apply应用</title>
</head>
<body>
<script>
var _e = function (a) {alert(a)};
typeof console != "undefined" && (_e = function (a) {
    console.log(a)
});
/*
typeof 运算符把类型信息当作字符串返回。typeof 返回值有六种可能： "number", "string", "boolean", "object", "function" 和 "undefined"



*/

_e(typeof(no_defined));//undefined

var abcd;
_e(typeof(abcd));//undefined

var a = null;
_e(typeof(a));//object

var a7 = NaN;
_e(typeof(a7));//number

var a8 = undefined;
_e(typeof(a8));//undefined

/*
未定义的变量和定义了未赋值的变量的typeof为undefined，null是一种特殊的object,NaN是一种特殊的number
数组的typeof值为object
*/


//alert(a == abcd);//true
//alert(a === abcd);//false
/*
null“等值(==)”于undefined，但不“全等值(===)”于undefined：
*/


/*
运算时null与undefined都可以被类型转换为false，但不等值于false：        
*/
document.writeln(!null, !undefined); //return true,true        
document.writeln(null==false); //return false        
document.writeln(undefined==false); //return false 


document.writeln("1s" == 1);

//强制类型转换
/*
Boolean:

Boolean()：
在要转换的值为“至少有一字符的字符串”、“非0的数字”或“对象”，那么Boolean()将返回true，
如果要转换的值为“空字符串”、“数字0”、“undefined”，“null”, "NaN"这些，那么Boolean()会返回false。


0 == !5 //true
"" == !5//true
*/
document.writeln('<br/>布尔bool转换：<br/>');//
document.writeln(Boolean(0));//false  数字0
document.writeln(Boolean('0'));//true  字符串'0'
document.writeln(Boolean(''));//false  空字符串
document.writeln(Boolean('script'));//true  非空字符串
document.writeln(Boolean(-1));//true  非0的数字
document.writeln(Boolean(null));//false  
document.writeln(Boolean(undefined));//false  
document.writeln(Boolean({}));//true       对象,为空也为真
document.writeln(Boolean([]));//true       数组，为空也为真
document.writeln(Boolean(new Object()));//true 对象
document.writeln(Boolean(NaN));//false    
document.writeln('<br/>');//









/*
Number()：
Number()与parseInt()和parseFloat()类似，它们区别在于Number()转换是整个值，而parseInt()和parseFloat()则可以只转换开头的数字部分，例如：Number("1.2.3"),Number("123abc")会返回NaN，而parseInt("1.2.3")返回1、parseInt("123abc")返回123、parseFloat("1.2.3")返回1.2、parseFloat("123abc")返回123。Number()会先判断要转换的值能否被完整的转换，然后再判断是调用parseInt()或parseFloat()。下面列了一些值调用Number()之后的结果：

Number(false)　 0
Number(true)　 1
Number(undefined)　 NaN      //比较特殊
Number(null)　 0			 //比较特殊
Number("1.2")　 1.2

Number("12")　 12
Number("1.2.3")　 NaN
Number(new Object())　 NaN
Number(123)　 123
*/
/*
1.如果是布尔值，true和false分别被转换为1和0
2.如果是数字值，返回本身。
3.如果是null，返回0.
4.如果是undefined，返回NaN。
5.如果是字符串，遵循以下规则：
	1.如果字符串中只包含数字，则将其转换为十进制（忽略前导0）
	2.如果字符串中包含有效的浮点格式，将其转换为浮点数值（忽略前导0）
	3.如果是空字符串，将其转换为0
	4.如果字符串中包含非以上格式，则将其转换为NaN
6.如果是对象，则调用对象的valueOf()方法，然后依据前面的规则转换返回的值。如果转换的结果是NaN，则调用对象的toString()方法，再次依照前面的规则转换返回的字符串值。
下表列出了对象的valueOf()的返回值：
	对象 返回值 
	Array 数组的元素被转换为字符串，这些字符串由逗号分隔，连接在一起。其操作与 Array.toString 和 Array.join 方法相同。 
	Boolean Boolean 值。 
	Date 存储的时间是从 1970 年 1 月 1 日午夜开始计的毫秒数 UTC。 
	Function 函数本身。 
	Number 数字值。 
	Object 对象本身。这是默认情况。 
	String 字符串值。 

下面提供几个例子，你能写出它的正确结果吗：


•Number(“hello CSSer!”);
•Number(“0×8″);
•Number(“”);
•Number(“020dd”);
•Number(“070″);
•Number(true);
*/
document.writeln(Number(false));
document.writeln(Number(true));
document.writeln(Number(undefined)); //NaN 
document.writeln(Number(null));      //0

/*
2、parseInt(string, radix)函数，将字符串转换为整数类型的数值。它也有一定的规则：


1.忽略字符串前面的空格，直至找到第一个非空字符
2.如果第一个字符不是数字符号或者负号，返回NaN
3.如果第一个字符是数字，则继续解析直至字符串解析完毕或者遇到一个非数字符号为止
4.如果上步解析的结果以0开头，则将其当作八进制来解析；如果以0x开头，则将其当作十六进制来解析
5.如果指定radix参数，则以radix为基数进行解析
小测验：

•parseInt(“hello CSSer!”);
•Number(“0×8″);
•parseInt(“”);
•parseInt(“020dd”);
•parseInt(“070″);
•parseInt(“22.5″);
*/
/*
3、parseFloat(string)函数，将字符串转换为浮点数类型的数值。

它的规则与parseInt基本相同，但也有点区别：字符串中第一个小数点符号是有效的，另外parseFloat会忽略所有前导0，如果字符串包含一个可解析为整数的数，则返回整数值而不是浮点数值。

*/
document.writeln(parseFloat("12.01aa8"));//12.01
document.writeln(parseFloat("12.00aa8"));//12
document.writeln(parseInt(010));//8

//???????????????不兼容
document.writeln(parseInt("010"));//10 Chrome
document.writeln(parseInt("010"));//8  IE

document.writeln(010.toString());//8
document.writeln(parseInt(010.toString()));//8

document.writeln('<br/>');
document.writeln(Number("0×8"));//NaN
document.writeln(Number("12a8"));//NaN
document.writeln(parseFloat("12.01aa8"));//
document.writeln('<br/>');

/*
String():
所有类型的数据转换成字符串
和toString()方法有些不同，区别在于：
var　t1　=　null;
var　t2　=　String(t1);//t2的值　"null"
var　t3　=　t1.toString();//这里会报错 因为t1为null 没有toString()方法
var　t4;
var　t5　=　String(t4);//t5的值　"undefined"
var　t6　=　t4.toString();//这里会报错 
*/
document.writeln(String(false)); //false
document.writeln(String(true));  //true
document.writeln(String(NaN));   //NaN
document.writeln(String(undefined)); //undefined
document.writeln(String(null));   //null
var addme;
document.writeln(String(addme));//undefined //未定义的变量和定义了未赋值的变量

/*
4、toString(radix)方法。除undefined和null之外的所有类型的值都具有toString()方法，其作用是返回对象的字符串表示。

对象 操作 
Array 将 Array 的元素转换为字符串。结果字符串由逗号分隔，且连接起来。 
Boolean 如果 Boolean 值是 true，则返回 “true”。否则，返回 “false”。 
Date 返回日期的文字表示法。 
Error 返回一个包含相关错误信息的字符串。 
Function 返回如下格式的字符串，其中 functionname 是被调用 toString 方法函数的名称： 
function functionname( ) { [native code] }
 
Number 返回数字的文字表示。 
String 返回 String 对象的值。 
默认 返回 “[object objectname]”，其中 objectname 是对象类型的名称。 

*/


/*
        ******************** 隐式转换
在某些情况下，即使我们不提供显示转换，Javascript也会进行自动类型转换，主要情况有：

1. 用于检测是否为非数值的函数：isNaN(mix)

isNaN()函数，经测试发现，该函数会尝试将参数值用Number()进行转换，如果结果为“非数值”则返回true，否则返回false。

2. 递增递减操作符（包括前置和后置）、一元正负符号操作符

这些操作符适用于任何数据类型的值，针对不同类型的值，该操作符遵循以下规则（经过对比发现，其规则与Number()规则基本相同）：

1.如果是包含有效数字字符的字符串，先将其转换为数字值（转换规则同Number()），在执行加减1的操作，字符串变量变为数值变量。
2.如果是不包含有效数字字符的字符串，将变量的值设置为NaN，字符串变量变成数值变量。
3.如果是布尔值false，先将其转换为0再执行加减1的操作，布尔值变量编程数值变量。
4.如果是布尔值true，先将其转换为1再执行加减1的操作，布尔值变量变成数值变量。
5.如果是浮点数值，执行加减1的操作。
6.如果是对象，先调用对象的valueOf()方法，然后对该返回值应用前面的规则。如果结果是NaN，则调用toString()方法后再应用前面的规则。对象变量变成数值变量。
小测验：

分别对以下类型的值执行后置递增操作，结果是什么？

“2″, ”0x2dd”, ”", "false",false, 22.5, +”", -false, +new Date()

*/

//递增递减、一元正负操作符
var p ="0x2dd";//是数字，所以执行parseInt
var p ="0x2dd.";//不是数字，为NaN，不执行parseInt，也不执行parseFloat
var p ="12.03";//是数字，所以执行parseFloat
p++;
document.writeln(p); 

var di = "false"; 
document.writeln(++di);//NaN
var di = false; 
document.writeln(++di);//1
var di = -false; 
document.writeln(di);//0
document.writeln(++di);//1
var di = -true; 
document.writeln(di);//-1
document.writeln(++di);//0

var di = []; 
document.writeln(-di);//0
var di = [1]; 
document.writeln(-di);//-1
var di = ["3b",2]; 
document.writeln(di.valueOf());//
document.writeln(-di);//NaN

var di = [0,1]; 
document.writeln(di.valueOf());//0,1
document.writeln(di.toString());//0,1
document.writeln(-di);//NaN



var d2 = {}; 
document.writeln(d2.valueOf());//[object Object]
document.writeln(d2.toString());//[object Object]
document.writeln(-d2);//NaN
var d2 = {1:1}; 
document.writeln(d2.valueOf());//[object Object]
document.writeln(d2.toString());//[object Object]
document.writeln(-d2);//NaN

/*
3. 加法运算操作符

加号运算操作符在Javascript也用于字符串连接符，所以加号操作符的规则分两种情况：

•如果两个操作值都是数值，其规则为：
1.如果一个操作数为NaN，则结果为NaN
2.如果是Infinity+Infinity，结果是Infinity
3.如果是-Infinity+(-Infinity)，结果是-Infinity
4.如果是Infinity+(-Infinity)，结果是NaN
5.如果是+0+(+0)，结果为+0
6.如果是(-0)+(-0)，结果为-0
7.如果是(+0)+(-0)，结果为+0
•如果有一个操作值为字符串，则：
1.如果两个操作值都是字符串，则将它们拼接起来
2.如果只有一个操作值为字符串，则将另外操作值转换为字符串，然后拼接起来
3.如果一个操作数是对象、数值或者布尔值，则调用toString()方法取得字符串值，然后再应用前面的字符串规则。对于undefined和null，分别调用String()显式转换为字符串。
可以看出，加法运算中，如果有一个操作值为字符串类型，则将另一个操作值转换为字符串，最后连接起来。


*/



/*
4. 乘除、减号运算符、取模运算符

这些操作符针对的是运算，所以他们具有共同性：如果操作值之一不是数值，则被隐式调用Number()函数进行转换。具体每一种运算的详细规则请参考ECMAScript中的定义。


*/


/*
5. 逻辑操作符（!、&&、||）

	逻辑非（！）操作符首先通过Boolean()函数将它的操作值转换为布尔值，然后求反。

	逻辑与（&&）操作符，如果一个操作值不是布尔值时，遵循以下规则进行转换：
		1.如果第一个操作数经Boolean()转换后为true，则返回第二个操作值，否则返回第一个值（不是Boolean()转换后的值）
		2.如果有一个操作值为null，返回null
		3.如果有一个操作值为NaN，返回NaN
		4.如果有一个操作值为undefined，返回undefined

	逻辑或（||）操作符，如果一个操作值不是布尔值，遵循以下规则：
		1.如果第一个操作值经Boolean()转换后为false，则返回第二个操作值，否则返回第一个操作值（不是Boolean()转换后的值）
		2.对于undefined、null和NaN的处理规则与逻辑与（&&）相同

*/
document.writeln("<br/>逻辑操作符<br/>");
var result =  0 && "aaa";
document.writeln(result);//aaa
document.writeln("<br/>");//
/*
6. 关系操作符（<, >, <=, >=）

	与上述操作符一样，关系操作符的操作值也可以是任意类型的，所以使用非数值类型参与比较时也需要系统进行隐式类型转换：

	1.如果两个操作值都是数值，则进行数值比较
	2.如果两个操作值都是字符串，则比较字符串对应的字符编码值
	3.如果只有一个操作值是数值，则将另一个操作值转换为数值，进行数值比较
	4.如果一个操作数是对象，则调用valueOf()方法（如果对象没有valueOf()方法则调用toString()方法），得到的结果按照前面的规则执行比较
	5.如果一个操作值是布尔值，则将其转换为数值，再进行比较
	注：NaN是非常特殊的值，它不和任何类型的值相等，包括它自己，同时它与任何类型的值比较大小时都返回false。


*/

/*
7. 相等操作符（==）

相等操作符会对操作值进行隐式转换后进行比较：

	1.如果一个操作值为布尔值，则在比较之前先将其转换为数值
	2.如果一个操作值为字符串，另一个操作值为数值，则通过Number()函数将字符串转换为数值
	3.如果一个操作值是对象，另一个不是，则调用对象的valueOf()方法，得到的结果按照前面的规则进行比较
	4.null与undefined是相等的
	5.如果一个操作值为NaN，则相等比较返回false
	6.如果两个操作值都是对象，则比较它们是不是指向同一个对象

	小测验： 
	if ([]) { console.log("true") } //do
	if ([] != true) { console.log("false") }//do
	console.log([] == ![]);//true


*/







var isUndef = function(a){ return typeof a === "undefined";};

var Class = {
	create: function(){
		return function(){
			this.initialize.apply(this, arguments);
		}
	}
}
var Thunder = {};
Thunder.WebThunder = Class.create();
Thunder.WebThunder.prototype = {	
	initialize: function(){
		this.name = "test";
	},
	getName: function(){
		return this.name;
	},
	setName: function(v){
		this.name = v;
	},
	version:"1.0.0"
}



//单例调用
Thunder.WebThunder.getInstance = function(){
	//alert(this._thunder);
	if (isUndef(this._thunder))
		this._thunder = new Thunder.WebThunder();
	return this._thunder;
}
var o = Thunder.WebThunder.getInstance();
var o1 = Thunder.WebThunder.getInstance();
o.name = "my name";
var obj = new Thunder.WebThunder();


_e(obj.version);
_e(o.version);
obj.version ="change version";
_e(obj.version);
_e(o.version);
_e(obj);
_e(o);


var A = function() {
    this.toString = function() { return "I'm an A"; };
};

var a = new A();  
//alert(a);// "I'm an A"
</script>

</body>
</html>